{
  "format_version": "1.10.0",
  "minecraft:attachable": {
    "description": {
      "identifier": "yes:phantom_whip_ad3",
      "item": { "yes:phantom_whip_ad3": "query.owner_identifier == 'minecraft:player'" },
      "materials": {
        "default": "entity_alphatest_glint",
        "enchanted": "entity_alphatest_glint"
      },
      "textures": {
        "visible": "textures/items/phantom/phantom_whip2",
        "invisible": "textures/items/phantom/phantom_whip_invisible",
		  "one": "textures/items/phantom/whip_animation/Whip_animation1",
		  "two": "textures/items/phantom/whip_animation/Whip_animation2",
		  "three": "textures/items/phantom/whip_animation/Whip_animation3",
		  "four": "textures/items/phantom/whip_animation/Whip_animation4",
		  "five": "textures/items/phantom/whip_animation/Whip_animation5",
		  "six": "textures/items/phantom/whip_animation/Whip_animation6",
		  "seven": "textures/items/phantom/whip_animation/Whip_animation7",
        "enchanted": "textures/misc/enchanted_item_glint"
      },
      "geometry": {
        "one": "geometry.phantom_whip",
        "two": "geometry.phantom_whip2",
        "three": "geometry.phantom_whip3",
        "four": "geometry.phantom_whip4",
        "five": "geometry.phantom_whip5",
        "six": "geometry.phantom_whip6",
        "seven": "geometry.phantom_whip7"
      },
      "scripts": {
        "pre_animation": [
          //custom variables
          "variable.expOriginal = query.player_level;",
          "variable.exp         = query.player_level;",
          "v.rotYOriginal = (Math.round(query.rider_head_y_rotation(0)*32/45) - 1);",
          "v.rotY         = (Math.round(query.rider_head_y_rotation(0)*32/45) - 1);",


          "v.max_pow = 8;",
          "v.is_animating          = (v.exp - (Math.pow(2,14)         -1) > 0) ? 1 : 0;",
					"v.is_animating_test     = (v.exp - (Math.pow(2,14)         -1) > 0) ? (v.exp = v.exp - Math.pow(2,14         )) : 0;",
          //skip 2^13

          "v.enderite_energy       = (v.exp - (Math.pow(2,v.max_pow-2)-1) > 0) ? 1*v.is_animating : 0;",
					"v.operation             = (v.exp - (Math.pow(2,v.max_pow-2)-1) > 0) ? (v.exp = v.exp - Math.pow(2,v.max_pow-2)) : 0;",
					"v.enderite_upside_down  = (v.exp - (Math.pow(2,v.max_pow-3)-1) > 0) ? 1*v.is_animating : 0;",
					"v.operation             = (v.exp - (Math.pow(2,v.max_pow-3)-1) > 0) ? (v.exp = v.exp - Math.pow(2,v.max_pow-3)) : 0;",
					"v.phantom_armor         = (v.exp - (Math.pow(2,v.max_pow-4)-1) > 0) ? 1*v.is_animating : 0;",
					"v.operation             = (v.exp - (Math.pow(2,v.max_pow-4)-1) > 0) ? (v.exp = v.exp - Math.pow(2,v.max_pow-4)) : 0;",
					"v.phantom_whip3         = (v.exp - (Math.pow(2,v.max_pow-5)-1) > 0) ? 1*v.is_animating : 0;",
					"v.operation             = (v.exp - (Math.pow(2,v.max_pow-5)-1) > 0) ? (v.exp = v.exp - Math.pow(2,v.max_pow-5)) : 0;",
					"v.phantom_whip2         = (v.exp - (Math.pow(2,v.max_pow-6)-1) > 0) ? 1*v.is_animating : 0;",
					"v.operation             = (v.exp - (Math.pow(2,v.max_pow-6)-1) > 0) ? (v.exp = v.exp - Math.pow(2,v.max_pow-6)) : 0;",
					"v.phantom_whip1         = (v.exp - (Math.pow(2,v.max_pow-7)-1) > 0) ? 1*v.is_animating : 0;",
					"v.operation             = (v.exp - (Math.pow(2,v.max_pow-7)-1) > 0) ? (v.exp = v.exp - Math.pow(2,v.max_pow-7)) : 0;",
					"v.using_weapon          = (v.exp - (Math.pow(2,v.max_pow-8)-1) > 0) ? 1*v.is_animating : 0;",
					"v.operation             = (v.exp - (Math.pow(2,v.max_pow-8)-1) > 0) ? (v.exp = v.exp - Math.pow(2,v.max_pow-8)) : 0;",
          
          "variable.whip_animation = v.phantom_whip1*Math.pow(2,0) + v.phantom_whip2*Math.pow(2,1) + v.phantom_whip3*Math.pow(2,2);"
        ]
      },
      "render_controllers": [ "controller.render.phantom_whip2_ad" ]
    }
  }
}
